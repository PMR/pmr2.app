<metal:block use-macro="here/global_defines/macros/defines" 
/><html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
  ><metal:slot metal:fill-slot="doctype"
    ><tal:tal tal:content="structure string:&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN&quot; &quot;http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd&quot;&gt;"/>
<tal:structure tal:content="structure view/xml_stylesheet"/>
    </metal:slot>

<metal:slot metal:fill-slot="javascript_head_slot"
    i18n:domain="pmr2.app">
  <script type="text/javascript">
  //<![CDATA[
    function resizeMainView() {
        var minHeight = 300;
        var mainView = jq("#cellml-mathml");
        var winHeight = jq(window).height();
        var viewTop = mainView.offset().top;

        var rawHeight = winHeight - viewTop;
        var newHeight = Math.max(minHeight, rawHeight);

        mainView.css('height', newHeight);
    };

    var resizeTimer = null;
    jq(window).bind('resize', function() {
        if (resizeTimer) clearTimeout(resizeTimer);
        resizeTimer = setTimeout(resizeMainView, 100);
    });

    jq(window).bind('load', function(){
      resizeMainView();
    });

  //]]>
  </script>
</metal:slot>

<body>

<metal:slot metal:fill-slot="main" i18n:domain="cmf_default">
  <h1>Mathematics</h1>
  <p class="discreet">You will need a MathML capable web browser (such as Mozilla Firefox 3, Opera 9.5 or through a MathML browser plugin) to view the following equations.</p>
  <div id="layout-contents">
    <div id="cellml-mathml" xmlns:mml="http://www.w3.org/1998/Math/MathML">
      <span tal:replace="structure view/contents" />
    </div>
  </div>
</metal:slot>
</body>
</html>
